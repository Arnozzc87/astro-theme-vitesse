# 飞书集成指南

本文档提供了如何设置飞书多维表格作为内容源，并通过Webhook自动发布到东莞市卫培教育网站的详细步骤。

## 飞书多维表格设置

### 第一步：创建专用多维表格

1. 在飞书中创建一个新的多维表格
2. 根据内容类型分别创建以下数据表：
   - 博客文章
   - 项目信息
   - 院校简章
   - 教务通知

### 第二步：设置数据表结构

**博客文章表结构**

| 字段名 | 字段类型 | 说明 |
|-------|--------|------|
| 标题 | 文本 | 文章标题 |
| 摘要 | 多行文本 | 文章简介 |
| 内容 | 多行文本 | 文章主体内容(Markdown格式) |
| 主图 | 链接 | 文章主图URL |
| 标签 | 文本 | 用逗号分隔的标签 |
| 作者 | 文本 | 文章作者 |
| 分类 | 单选 | 文章分类 |
| 发布日期 | 日期 | 发布日期 |
| 表格类型 | 单选 | 固定值为"blog" |

**项目信息表结构**

| 字段名 | 字段类型 | 说明 |
|-------|--------|------|
| 标题 | 文本 | 项目名称 |
| 摘要 | 多行文本 | 项目简介 |
| 内容 | 多行文本 | 项目详情(Markdown格式) |
| 主图 | 链接 | 项目主图URL |
| 分类 | 单选 | 如"专升本"、"高升专"等 |
| 特点 | 多行文本 | 项目特点(每行一个) |
| 报名要求 | 多行文本 | 报名要求(每行一个) |
| 学制 | 文本 | 如"2.5年" |
| 费用 | 文本 | 如"12800元/年" |
| 优先级 | 数字 | 展示优先级 |
| 表格类型 | 单选 | 固定值为"project" |

**院校简章表结构**

| 字段名 | 字段类型 | 说明 |
|-------|--------|------|
| 标题 | 文本 | 院校名称 |
| 摘要 | 多行文本 | 院校简介 |
| 内容 | 多行文本 | 院校详情(Markdown格式) |
| 主图 | 链接 | 院校主图URL |
| 地区 | 文本 | 院校所在地 |
| 等级 | 单选 | 如"985/211"、"双一流"等 |
| 招生项目 | 表格 | 包含名称、描述、费用的子表格 |
| 优先级 | 数字 | 展示优先级 |
| 表格类型 | 单选 | 固定值为"school" |

**教务通知表结构**

| 字段名 | 字段类型 | 说明 |
|-------|--------|------|
| 标题 | 文本 | 通知标题 |
| 摘要 | 多行文本 | 通知简介 |
| 内容 | 多行文本 | 通知内容(Markdown格式) |
| 主图 | 链接 | 通知配图URL |
| 类型 | 单选 | 如"政策"、"招生"、"教务" |
| 重要性 | 单选 | "高"、"中"、"低" |
| 过期日期 | 日期 | 通知有效期 |
| 表格类型 | 单选 | 固定值为"notice" |

## 设置飞书自动化

### 第一步：创建自动化规则

1. 打开飞书多维表格
2. 点击"自动化" > "创建自动化"
3. 设置触发条件为"表格记录创建后"或"表格记录更新后"
4. 添加HTTP请求动作

### 第二步：配置Webhook

1. 在HTTP请求动作中：
   - 请求方式：POST
   - URL：`{你的API地址}/webhook/feishu`
   - 请求头：`Content-Type: application/json`
   - 请求体：选择"记录的所有字段"

2. 保存并启用自动化规则

## 内容发布流程

1. 在飞书多维表格中填写内容
2. 保存记录后自动触发Webhook
3. API处理内容并生成SEO数据
4. 创建Markdown文件
5. 触发网站重新构建
6. 更新上线的网站内容

## 注意事项

1. 图片URL必须是可公开访问的
2. Markdown内容支持常见格式和HTML
3. 推荐使用相对路径引用站内资源
4. 内容修改会覆盖之前的版本，请谨慎操作

## 飞书表格模板

我们提供了预配置的飞书多维表格模板，可直接复制使用：
[卫培教育内容管理模板](https://example.feishu.cn/base/template/XXX)（请替换为实际模板链接）
